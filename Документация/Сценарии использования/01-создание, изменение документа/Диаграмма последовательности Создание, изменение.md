# Прецедент 1: Создание и редактирование документа
```mermaid
@startuml CreateModifyDocument
actor Main
participant Editor
participant CompositeManager
participant Document
participant Paragraph
participant Sentence
participant Word
participant Letter

Main -> Editor : Run()\nRequestText()
Editor -> Editor : NewDocument(name)\n-> creates Document
Editor -> Document : <<constructor>>(name)
Editor -> CompositeManager : Add(document, paragraph)\n// создать первый абзац
CompositeManager -> Document : Add(p: Paragraph)
Document -> Paragraph : <<constructor>>()
CompositeManager -> Paragraph : Add(sentence)
Paragraph -> Sentence : <<constructor>>()
CompositeManager -> Sentence : Add(word)
Sentence -> Word : <<constructor>>(text)
CompositeManager -> Word : Add(letter)
Word -> Letter : <<constructor>>(char)

note right of Editor
Создание структуры:
Document -> Paragraph -> Sentence -> Word -> Letter
выполняется через CompositeManager.Add
end note

== Изменение: добавить ещё слово в предложение ==
Editor -> CompositeManager : Add(sentence, word2)
CompositeManager -> Sentence : Add(word2)
Sentence -> Word : <<constructor>>(text2)

== Поиск и замена текста (ReplaceAll) ==
Editor -> CompositeManager : GetText(document) : string
CompositeManager -> Document : Traverse(node, collect text)
CompositeManager --> Editor : text
Editor -> CompositeManager : FindText(document, "old")
CompositeManager -> Document : Traverse(node, match "old")
CompositeManager --> Editor : List<positions>
Editor -> CompositeManager : ReplaceText(document, "old", "new")
CompositeManager -> Document : Traverse(node, replace occurrences)
CompositeManager --> Editor : resultCount

@enduml


```


