### Прецендент: Открыть/сохранить
``` mermaid
sequenceDiagram
    actor User as Пользователь
    participant Editor as Editor
    participant DocumentManager as DocumentManager
    participant Document as Document
    participant SyntaxHighlighter as SyntaxHighlighter

    %% Открытие документа
    User->>Editor: OpenDocument(path="docs/notes.md")
    activate Editor
    Editor->>DocumentManager: Open(path)
    activate DocumentManager
    DocumentManager->>Document: Load(path)
    activate Document
    Document-->>DocumentManager: Document{id, Name, Path, Content, Format}
    deactivate Document
    DocumentManager-->>Editor: Document (загружен)
    deactivate DocumentManager
    Editor->>Editor: Set CurrentDocument = Document

    %% Подсветка после открытия
    Editor->>SyntaxHighlighter: Highlight(Document.Content, Document.Format)
    activate SyntaxHighlighter
    SyntaxHighlighter-->>Editor: List~HighlightToken~
    deactivate SyntaxHighlighter
    Editor-->>User: UI: показываем содержимое + подсветку
    deactivate Editor

    %% Сохранение
    User->>Editor: SaveCurrent()
    activate Editor
    Editor->>Document: Save()
    activate Document
    Document-->>Editor: OK (IsModified = false, Path set)
    deactivate Document
    Editor-->>User: UI: "Saved"
    deactivate Editor

    %% Сохранить как / Экспорт в другой формат
    User->>Editor: ExportCurrent(path="out/doc.pdf", format="pdf")
    activate Editor
    Editor->>Document: Export(path, format)
    activate Document
    Document-->>Editor: ExportResult(success=true)
    deactivate Document
    Editor-->>User: UI: "Exported to PDF"
    deactivate Editor
```
